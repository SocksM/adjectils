<!DOCTYPE html>
  <html lang = "en">
    <head>
      <title>adjectils - Mega Walls</title>
      <link rel="stylesheet" href="stylesheet.css">
        <meta property="og:title" content="adjectils – Mega Walls">
        <meta property="og:description" content="Sartorial utilities for Mega Walls">
        <meta property="og:image" content="https://adjectils.com/images/mega_walls/embed_image.png">
        <meta property="og:url" content="https://adjectils.com/mw.html">
        <meta property="og:type" content="website">

        <meta name="title" content="adjectils – Mega Walls">
        <meta name="description" content="Sartorial utilities for Mega Walls">
        <meta name="image" content="https://adjectils.com/images/mega_walls/embed_image.png">
        <meta name="url" content="https://adjectils.com/mw.html">
        <meta name="type" content="website">

        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="adjectils – Mega Walls">
        <meta name="twitter:description" content="Sartorial utilities for Mega Walls">
        <meta name="twitter:image" content="https://adjectils.com/images/mega_walls/embed_image.png">
        
      <meta name = "viewport" content="width=device-width, initial-scale=0.6">
      <link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
      <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">
      <link rel="manifest" href="./favicon/site.webmanifest">
      <script type="text/javascript" src="/jquery-3.6.3.min.js"></script>
      <script src = "getUUID.js"></script>
      <script src = "mwdata.js"></script>
      <script src="skinview3d.bundle.js"></script>
    </head>
  <body onload="updatePage()">
  
    <script>
        $(function(){
        $("#nav").load("nav.html", function() { setWord(); }); 
        });
    </script>
    <div style = "text-align:center; margin: auto"> 
        <span class = adjheader>adjectils</span><span class = header>&nbsp;|&nbsp;</span><span class = header>Mega Walls</span><br>
    </div>

    <div style = "text-align:center">
        <label>Username: <input type = "text" id = "nameinput" onchange = updateUser(value)>&nbsp;</label><button onclick = updateUser(nameinput.value) style = "width: 80px;  text-align:center">Refresh ⟳</button><br>
        <span id = "refreshstatus"></span><br>
        <span id = "status"></span><br>
        <span id = "otherstatus"></span><br>
    </div>

    <section class = flex_box_index style = "width: min(calc(100% - 30px), max(960px, 70%)); margin:auto">
        <span class = "header">Classes</span>
        <div class = "flex_index_row flex_full_row" id = row1 style = "width:50%; flex-basis:51%; margin:auto; margin-top:10px;">
                    
        </div>
        <div class = "flex_index_row flex_full_row" id = row2 style = "width:50%; flex-basis:51%; margin:auto; margin-top:10px;">
            
        </div>
        <div class = "flex_index_row flex_full_row" id = row3 style = "width:50%; flex-basis:51%; margin:auto; margin-top:10px;">
            
        </div>
    </section>
    <section class = "flex_box_index" style = "width: min(calc(100% - 30px), max(960px, 70%)); margin: auto;" >
        <span class = "header" style = "margin-top:20px">Skins</span>
        <span style = "margin-top:20px">Total skins found: <span style = "margin-top:20px" id = totalskinsfound>27</span>/328 (<span id = "totalskinspercent">9</span>%)</span>
        <div class = "flex_index_row flex_full_row" id = row4 style = "width:90%; flex-basis:51%; margin:auto; margin-top:10px;">
            <div class = "flex_index_box" style = "flex-basis: 70%;">
                <div class = "flex_index_row flex_full_row" style = "margin:5px;flex-wrap:wrap; align-items: center;">
                    <span class = "flex_full_row" style = "margin:auto; justify-content: center;">Hover to view details.</span>
                    <span class = "flex_full_row" style = "margin:auto; justify-content: center;">Click to view skins.</span>
                </div>
                <div class = "flex_index_row flex_full_row" id = "skinrow1" style = "margin:5px">

                </div>
                <div class = "flex_index_row flex_full_row" id = "skinrow2" style = "margin:5px">
                    <div class = "fishbox"><div class = "fishboxtext">Select a class first!</div><img src = "./images/mega_walls/not_unlocked.png" style = "width:80%; height:80%"></div>
                </div>
            </div>
            <div class = "flex_index_box" style = "flex-basis: 20%; width:250px;height:400px; flex-wrap:nowrap">
                <canvas id="skin_container" style = "width:100px;height:200px;background-color: #404040;cursor:pointer"></canvas>
                <a id = "downloadlink"  style = "height:24px; width:24px;background-color: #808080;text-align: center;color:#c0c0c0; margin-left:5px; border-style: solid;border-width:2px;cursor:pointer">⤓</a>
            </div>
        </div>
        <div class = "flex_index_row flex_full_row" style = "width:min(calc(100% - 30px), max(960px, 70%)); flex-basis:100%; flex-wrap:wrap;">
            <div class = "header" style = "text-align:center; flex-basis:100%">Closest In-Progress Skins</div>
            <div class = "flex_index_box" style = "flex-basis:100%" id = "closestskinbox">
                <table id = "closestskintable">

                </table>
            </div>

        </div>

    </section>
    



  <div id = "nav" style = "width:min(calc(100% - 30px), max(600px, 40%)); margin: auto" class = "hub_block"></div>
</body>
<script>

    // Startup sequence.

    function updatePage(){
        resetPage();
        if (!(localStorage.getItem("storedmwname") == "" || localStorage.getItem("storedmwname") == null)){
            console.log("Found a previous name and data! Loading...");
            document.getElementById("nameinput").value = localStorage.getItem("storedmwname");
            data = JSON.parse(localStorage.getItem("storedmwdata"));
            fasttrack = true;
            updateUser(localStorage.getItem("storedmwname"));
        }
    }
    function resetPage() {
        updateSize();
        resetBoxes();
        initClasses();
        selectClass(-1);
        selectSkin(-1);
        updateTooltipNumbers(0);
        makeRender();
    }

    // Failsafe command. May be run on page load or if an invalid username is input.

    function resetBoxes(){
        for (var i = 1; i <= 3; i++){
            document.getElementById("row" + i).innerHTML = "";
        }
    }

    // Part of the startup sequence.

    function initClasses() {
        for (let j = 1; j <= 3; j++){
            for (let i = 9 * (j - 1); i < 9 * j; i++){
                let box = document.createElement("div");
                box.className = "fishbox";
                box.id = classnames[i] + "_box";
                box.style.cursor = "pointer";
                box.onclick = function() {
                    selectClass(i);
                };
                if (classnames[i] == ""){
                    box.style.opacity = "0%";
                } else {
                    var classimage = document.createElement("img");
                    classimage.src = "./images/mega_walls/not_unlocked.png";
                    classimage.style.height = "80%"; 
                    classimage.style.width = "80%";
                    classimage.alt = "";
                    classimage.id = classnames[i] + "_image";
                    box.appendChild(classimage);
                    var tooltip = document.createElement("div");
                    tooltip.className = "fishboxtext";
                    tooltip.id = (classnames[i] + "_text");
                    tooltip.style.opacity = "90%";
                    tooltip.style.zIndex = "5";
                    box.appendChild(tooltip);
                }
                
                document.getElementById("row" + j).appendChild(box);
            }
        }
        initToolTips();
    }

    // Allows user to pick a a class.

    var selectedClass = 20;

    function selectClass(classIndex){
        document.getElementById(classnames[selectedClass] + "_box").style.borderColor = "#808080";
        if (classIndex == -1){
            
            return -1;
        }
        selectedClass = classIndex;
        document.getElementById(classnames[selectedClass] + "_box").style.borderColor = "#00cc00";
        updateSkinRows();
    }

    // Gets API data. 
    var data;
    var mwdata;
    var fasttrack = false;
    var onCD = false;
    async function updateUser(name){

        // Rudimentary cooldown to avoid refresh spamming causing rate limits. 

        if (onCD == true){
            document.getElementById("refreshstatus").innerText = "Please wait 5 seconds before using this again.";
            return -1;
        } else {
            document.getElementById("refreshstatus").innerText = "";
            if (!fasttrack) {
                onCD = true;
                setTimeout(() => { onCD = false }, 5000);
            }
            
        }
        // Get the API data.

        UUID = await getUUIDbyName(name);
        if (UUID == -1) {
            return -1;
        }
        if (!fasttrack){
            data = await getStats(UUID);
        }
        fasttrack = false;
        localStorage.setItem("storedmwname", name);
        localStorage.setItem("storedmwdata", JSON.stringify(data)); 
        
        try {
            mwdata = data.player.stats.Walls3;
        } catch (TypeError) {
            document.getElementById("status").innerText = "This player hasn't played on Hypixel!";
            fasttrack = false;
            localStorage.setItem("storedmwname", "");
            localStorage.setItem("storedmwdata", ""); 
            data = "";
            mwdata = "";
            topSkins = [];
            resetPage();
            return -1;
        }
        
        if (mwdata == undefined){
            document.getElementById("status").innerText = "This player hasn't played Mega Walls!";
            fasttrack = false;
            localStorage.setItem("storedmwname", null);
            localStorage.setItem("storedmwdata", null); 
            data = "";
            mwdata = "";
            topSkins = [];
            resetPage();
            return -1;
        }
        updateClasses(mwdata);
        updateTooltipNumbers(5);
        selectClass(classnamesCapital.indexOf(mwdata.chosen_class));
    }

    // Updates boxes when a player is checked.

    function updateClasses(playerdata){

        // Update icons.

        for (let j = 1; j <= 3; j++){
            for (let i = 9 * (j - 1); i < 9 * j; i++){
                if (playerdata.classes[classnames[i]] != undefined && playerdata.classes[classnames[i]].unlocked == true) {
                    
                    document.getElementById(classnames[i] + "_image").src = "./images/mega_walls/" + classnames[i] + "_icon.png";
                } else if (i >= 0 && i <= 2) {
                    document.getElementById(classnames[i] + "_image").src = "./images/mega_walls/" + classnames[i] + "_icon.png";
                } else {
                    document.getElementById(classnames[i] + "_image").src = "./images/mega_walls/not_unlocked.png";
                }
            }
        }

        // Update prestiges. 

        for (let i = 0; i < 27; i++) {
            document.getElementById(classnames[i] + "_prestige").innerText = "";
            if (playerdata.classes[classnames[i]] != undefined && playerdata.classes[classnames[i]].prestige > 0) {
                var prestag = "";
                for (let j = 0; j < playerdata.classes[classnames[i]].prestige; j++){
                    prestag += "✫";
                }
                document.getElementById(classnames[i] + "_prestige").innerText = prestag;
                if (playerdata.classes[classnames[i]].prestige_tag != undefined && playerdata.classes[classnames[i]].prestige_tag.type != "CHROMA" && playerdata.classes[classnames[i]].prestige_tag.type != "CUSTOM"){
                    document.getElementById(classnames[i] + "_prestige").style.color = tagColors[playerdata.classes[classnames[i]].prestige_tag.type];
                } else {
                    document.getElementById(classnames[i] + "_prestige").style.color = "#ffaa00";
                }
                // Note to self: write exceptions for chroma and custom later
            }
        }

        // Update class points.

        for (let i = 0; i < 27; i++) {
            document.getElementById(classnames[i] + "_classPoints").innerText = "0";
            if (playerdata[classnames[i] + "_class_points"] != undefined) {
                document.getElementById(classnames[i] + "_classPoints").innerText = playerdata[classnames[i] + "_class_points"];
            }
        }


        
    }
    
    // Initializes the tooltip for each class.

    function initToolTips() {
        for (var i = 0; i < 27; i++){
            if (classnames[i] != ""){
                makeTooltipObject(classnames[i] + "_text", "", classnamesCapital[i] + " ", "20px", classColors[i], false);
                makeTooltipObject(classnames[i] + "_text", classnames[i] + "_prestige", "", "20px", "#ffaa00", true);
                makeTooltipObject(classnames[i] + "_text", "", classTypes[i] + " Class", "16px", "#c0c0c0", true);
                makeTooltipObject(classnames[i] + "_text", "", "Play styles: ", "16px", "#c0c0c0", false);
                makeTooltipObject(classnames[i] + "_text", "", classStyles1[i], "16px", styleColors[classStyles1[i]], false);
                makeTooltipObject(classnames[i] + "_text", "", ", ", "16px", "#c0c0c0");
                makeTooltipObject(classnames[i] + "_text", "", classStyles2[i], "16px", styleColors[classStyles2[i]], true);
                makeTooltipObject(classnames[i] + "_text", "", "Difficulty: ", "16px", "#c0c0c0", false);
                for (var j = 0; j < difficulties[i]; j++){
                    makeTooltipObject(classnames[i] + "_text", "", "●", "16px", difficultyColors[difficulties[i]], false);
                }
                for (var j = difficulties[i]; j < 4; j++){
                    makeTooltipObject(classnames[i] + "_text", "", "●", "16px", "#c0c0c0", false);
                }
                makeTooltipObject(classnames[i] + "_text", "", "", "16px", "#c0c0c0", true);
                makeTooltipObject(classnames[i] + "_text", "", "Skins: ", "16px", "#c0c0c0", false);
                makeTooltipObject(classnames[i] + "_text", classnames[i] + "_skinCount", "1", "16px", "#c0c0c0", false);
                makeTooltipObject(classnames[i] + "_text", "", "/" + classTotalSkins[i], "16px", "#c0c0c0", true);
                makeTooltipObject(classnames[i] + "_text", "", "Class Points: ", "16px", "#c0c0c0", false);
                makeTooltipObject(classnames[i] + "_text", classnames[i] + "_classPoints", "0", "16px", "#c0c0c0", true);
            }
        }
    } 

    // Helper function.

    function makeTooltipObject(target, id, text, fontSize, color, lineBreak){
        var toInsert = document.createElement("span");
        toInsert.innerText = text;
        toInsert.style.flexBasis = "100%";
        toInsert.style.fontSize = fontSize;
        toInsert.style.color = color;
        if (id != ""){
            toInsert.id = id;
        }
        document.getElementById(target).appendChild(toInsert);
        if (lineBreak) {
            document.getElementById(target).appendChild(document.createElement("br"));
        }   
    }
    var currentSkinCount = [];
    //Updates the numbers of skins for each class.
    var topSkins = [];
    function updateTooltipNumbers(showmore){
        topSkins = [];
        currentSkinCount = [];
        var totaltotalskins = 0;
        for (var j = 0; j < 27; j++) {
            var totalSkins = 1;
            for (var i = 0; i < classTotalSkins[j]; i++){
                let skinNames = eval(`skinNames_${j}`);
                let skinDesc = eval(`skinDesc_${j}`);
                let skinPaths = eval(`skinPaths_${j}`);
                let skinPaths_onetime = eval(`skinPaths_onetime_${j}`);
                let skinReqs = eval(`skinReqs_${j}`);
                let skinReqDesc = eval(`skinReqDesc_${j}`);
                let skinReqDesc_onetime = eval(`skinReqDesc_onetime_${j}`);
                
                if (skinPaths[i] == "") {
                }
                else if (skinPaths[i] == "onetime") {
                    try {
                        if (data.player.achievementsOneTime.includes(skinPaths_onetime[i])) {
                            totalSkins++;
                        }
                    } catch (TypeError) {
                    }
                }
                else if (skinPaths[i] == "pres3") {
                    try {
                        if (mwdata.classes[classnames[j]].prestige >= 3) {
                            totalSkins++;
                        } 
                    } catch (TypeError) {
                    }
                }
                else if (skinPaths[i] == "pres5") {
                    try {
                        if (mwdata.classes[classnames[j]].prestige >= 5) {
                            totalSkins++;
                        }
                    } catch (TypeError) {
                    }
                }
                else if (skinPaths[i] == "purchase") {
                    try {
                        if (mwdata.packages.includes(skinReqDesc_onetime[i])) {
                            totalSkins++;
                        }
                    } catch (TypeError) {
                    }
                }
                else if (skinPaths[i] == "completionist") {
                    try {
                        if (classTotalSkins[j] == totalSkins + 1) {
                            totalSkins++;
                        }
                    } catch (TypeError) {
                    }
                }
                else {
                    try {
                        if (mwdata[skinPaths[i]] >= skinReqs[i]) {
                            totalSkins++;
                        } else if (mwdata[skinPaths[i]] != undefined){
                            if (skinPaths[i] == "squid_defender_final_kills") {
                                var squidDFK = 0;
                                var squidDFA = 0;
                                if (mwdata["squid_defender_final_kills"] != undefined) {
                                    squidDFK = mwdata["squid_defender_final_kills"];
                                }
                                if (mwdata["squid_defender_final_assists"] != undefined) {
                                    squidDFA = mwdata["squid_defender_final_assists"];
                                }
                                if ((squidDFK + squidDFA) < 10) {
                                    topSkins.push({
                                        key: skinPaths[i],
                                        value: (((squidDFK + squidDFA) / skinReqs[i]) * 100).toFixed(1),
                                        className: classnamesCapital[j],
                                        skinName: skinNames[i],
                                        req: skinReqDesc[i],
                                        progress: squidDFK + squidDFA,
                                        max: skinReqs[i],
                                    })
                                }
                                
                            } else if (skinPaths[i] == "final_assists_after_final_killed") {
                                var deadFK = 0;
                                var deadFA = 0;
                                if (mwdata["final_assists_after_final_killed"] != undefined) {
                                    deadFA = mwdata["final_assists_after_final_killed"];
                                }
                                if (mwdata["final_kills_after_final_killed"] != undefined) {
                                    deadFK = mwdata["final_kills_after_final_killed"];
                                }
                                if ((deadFK + deadFA) < 15) {
                                    topSkins.push({
                                        key: skinPaths[i],
                                        value: (((deadFK + deadFA) / skinReqs[i]) * 100).toFixed(1),
                                        className: classnamesCapital[j],
                                        skinName: skinNames[i],
                                        req: skinReqDesc[i],
                                        progress: deadFK + deadFA,
                                        max: skinReqs[i],
                                    })
                                }
                                
                            } else {
                                topSkins.push({
                                    key: skinPaths[i],
                                    value: ((mwdata[skinPaths[i]] / skinReqs[i]) * 100).toFixed(1),
                                    className: classnamesCapital[j],
                                    skinName: skinNames[i],
                                    req: skinReqDesc[i],
                                    progress: mwdata[skinPaths[i]],
                                    max: skinReqs[i],
                                })
                            }
                            

                        }
                    } catch (TypeError) {
                    }
                }
                
            }
            document.getElementById(classnames[j] + "_skinCount").innerText = totalSkins; 
            totaltotalskins += totalSkins;
            currentSkinCount.push(totalSkins);
        }
        document.getElementById("totalskinsfound").innerText = totaltotalskins;
        document.getElementById("totalskinspercent").innerText = ((totaltotalskins/328) * 100).toFixed(1);
        topSkins.sort((a, b) => b.value - a.value);
        closestskintable.innerHTML = "";
        try {
            closestskinbox.removeChild(document.getElementById("showmoretext"));
        } catch {
            
        }
        
        for (var i = 0; i < showmore; i++) {
            if (i >= topSkins.length) {
                break;
            }
            var tablerow = document.createElement("tr");
            var classname = document.createElement("td");
            classname.innerText = topSkins[i].className;
            classname.style.paddingLeft = "20px";
            var skinname = document.createElement("td");
            skinname.style.paddingLeft = "20px";
            skinname.innerText = topSkins[i].skinName;
            var skintask = document.createElement("td");
            skintask.style.paddingLeft = "20px";
            skintask.innerText = topSkins[i].req;
            skintask.style.fontSize = "16px";
            var progress = document.createElement("td");
            progress.style.paddingLeft = "20px";
            if (topSkins[i].value < 10) {
                progress.innerText = "(" + topSkins[i].progress + "/" + topSkins[i].max + ")\n(" + topSkins[i].value + "%)";
            } else {
                progress.innerText = "(" + topSkins[i].progress + "/" + topSkins[i].max + ")\n(" + topSkins[i].value + "%)";
            }
            progress.style.textAlign = "right";
            var box = document.createElement("div");
            box.style.position = "relative";
            box.className = "fishbox";
            var bg = document.createElement("span");
            bg.style.height = "8px"; 
            bg.style.width = "8px";
            bg.style.transform = "scale(5)";
            bg.style.imageRendering = "pixelated";
            bg.style.backgroundImage = "url('./images/mega_walls/skins/" + topSkins[i].skinName + ".png')";
            bg.style.backgroundRepeat = "no-repeat";
            bg.style.backgroundPositionX = "-8px";
            bg.style.backgroundPositionY = "-8px";
            bg.style.position = "absolute";
            box.appendChild(bg);
            var fringe = document.createElement("span");
            fringe.style.height = "8px"; 
            fringe.style.width = "8px";
            fringe.style.transform = "scale(5)";
            fringe.style.imageRendering = "pixelated";
            fringe.style.backgroundImage = "url('./images/mega_walls/skins/" + topSkins[i].skinName + ".png')";
            fringe.style.backgroundRepeat = "no-repeat";
            fringe.style.backgroundPositionX = "-40px";
            fringe.style.backgroundPositionY = "-8px";
            fringe.style.position = "absolute";
            box.appendChild(fringe);
            var imagetd = document.createElement("td");
            imagetd.appendChild(box);
            tablerow.appendChild(imagetd);
            tablerow.appendChild(classname);
            tablerow.appendChild(skinname);
            tablerow.appendChild(skintask);
            tablerow.appendChild(progress);
            closestskintable.appendChild(tablerow);
        }
        if (showmore == 5 && i >= 5) {
            var tablerow = document.createElement("div");
            tablerow.className = "flex_full_row";
            tablerow.id = "showmoretext";
            var showtext = document.createElement("span");
            showtext.innerText = "Show more ...";
            showtext.className = "hovertext";
            tablerow.appendChild(showtext);
            tablerow.onclick = function() {
                updateTooltipNumbers(1000);
            };
            closestskinbox.appendChild(tablerow);
        }
        if (i == 0) {
            var tablerow = document.createElement("tr");
            var NUimg = document.createElement("td");
            var box = document.createElement("div");
            box.style.position = "relative";
            box.className = "fishbox";
            var defaultimg = document.createElement("img");
            defaultimg.src = "./images/mega_walls/not_unlocked.png";
            defaultimg.style.width = "80%";
            defaultimg.style.height = "80%";
            box.appendChild(defaultimg);
            tablerow.appendChild(box);
            var defaulttext = document.createElement("td");
            defaulttext.innerText = "No skins in progress!"
            defaulttext.style.paddingLeft = "20px";
            tablerow.appendChild(defaulttext);
            closestskintable.appendChild(tablerow);
        }
    }
    function addCheck(skinNames, i) {
        var checkmark = document.createElement("span");
        checkmark.className = "upperRightIcon";
        checkmark.innerText = "✓";
        document.getElementById(skinNames[i] + "_box").appendChild(checkmark);

    }
    function updateSkinRows() {
        skinrow1.innerHTML = "";
        skinrow2.innerHTML = "";
        let skinNames = eval(`skinNames_${selectedClass}`);
        let skinDesc = eval(`skinDesc_${selectedClass}`);
        let skinPaths = eval(`skinPaths_${selectedClass}`);
        let skinPaths_onetime = eval(`skinPaths_onetime_${selectedClass}`);
        let skinReqs = eval(`skinReqs_${selectedClass}`);
        let skinReqDesc = eval(`skinReqDesc_${selectedClass}`);
        let skinReqDesc_onetime = eval(`skinReqDesc_onetime_${selectedClass}`);
        let perrow = 7;
        if (classTotalSkins[selectedClass] % 2 == 0) {
            perrow = classTotalSkins[selectedClass] / 2;
        }
        // initialize boxes
        for (var i = 0; i < classTotalSkins[selectedClass]; i++){
            if (i < perrow) {
                addSkinBox(skinrow1, skinNames[i]);
            } else {
                addSkinBox(skinrow2, skinNames[i]);
            }
        }
        // Load req tooltips
        for (var i = 0; i < classTotalSkins[selectedClass]; i++){
            var tip = document.getElementById(skinNames[i] + "_tiptext");
            makeTooltipObject(tip.id, "", skinNames[i], "20px", "#c0c0c0", true);
            makeTooltipObject(tip.id, "", skinDesc[i], "12px", "#808080", true);
            makeTooltipObject(tip.id, "", "Requirement: ", "12px", "#c0c0c0", false);
            if (skinPaths[i] == "") {
                makeTooltipObject(tip.id, "", "Unlocked by default", "12px", "#c0c0c0", true);
                document.getElementById(skinNames[i] + "_box").style.borderColor = "#22aa22";
                addCheck(skinNames, i);
            }
            else if (skinPaths[i] == "onetime") {
                makeTooltipObject(tip.id, "", skinReqDesc_onetime[i], "12px", "#c0c0c0", true);
                makeTooltipObject(tip.id, "", "Status: ", "12px", "#c0c0c0", false);
                try {
                    if (data.player.achievementsOneTime.includes(skinPaths_onetime[i])) {
                        makeTooltipObject(tip.id, "", "Unlocked!", "12px", "#55ff55", false);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#22aa22";
                        document.getElementById(skinNames[i] + "_box").className = "fishbox";
                        addCheck(skinNames, i);
                    } else {
                        makeTooltipObject(tip.id, "", "Locked", "12px", "#ff5555", false);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                    }
                } catch (TypeError) {
                    makeTooltipObject(tip.id, "", "Locked", "12px", "#ff5555", false);
                    document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                }
                
            }
            else if (skinPaths[i] == "pres3") {
                makeTooltipObject(tip.id, "", "Prestige III " + classnamesCapital[selectedClass], "12px", "#c0c0c0", true);
                makeTooltipObject(tip.id, "", "Status: ", "12px", "#c0c0c0", false);
                try {
                    if (mwdata.classes[classnames[selectedClass]].prestige >= 3) {
                        makeTooltipObject(tip.id, "", "Unlocked!", "12px", "#55ff55", false);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#22aa22";
                        addCheck(skinNames, i);
                    } else {
                        makeTooltipObject(tip.id, "", "Locked", "12px", "#ff5555", false);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                    }
                } catch (TypeError) {
                    makeTooltipObject(tip.id, "", "Locked", "12px", "#ff5555", false);
                    document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                }
            }
            else if (skinPaths[i] == "pres5") {
                makeTooltipObject(tip.id, "", "Prestige V " + classnamesCapital[selectedClass], "12px", "#c0c0c0", true);
                makeTooltipObject(tip.id, "", "Status: ", "12px", "#c0c0c0", false);
                try {
                    if (mwdata.classes[classnames[selectedClass]].prestige >= 5) {
                        makeTooltipObject(tip.id, "", "Unlocked!", "12px", "#55ff55", false);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#22aa22";
                        addCheck(skinNames, i);
                    } else {
                        makeTooltipObject(tip.id, "", "Locked", "12px", "#ff5555", false);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                    }
                } catch (TypeError) {
                    makeTooltipObject(tip.id, "", "Locked", "12px", "#ff5555", false);
                    document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                }
            }
            else if (skinPaths[i] == "purchase") {
                makeTooltipObject(tip.id, "", skinReqs[i] + " coins", "12px", "#ffaa00", true);
                makeTooltipObject(tip.id, "", "Status: ", "12px", "#c0c0c0", false);
                try {
                    if (mwdata.packages.includes(skinReqDesc_onetime[i])) {
                        makeTooltipObject(tip.id, "", "Unlocked!", "12px", "#55ff55", false);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#22aa22";
                        addCheck(skinNames, i);
                    } else {
                        makeTooltipObject(tip.id, "", "Locked", "12px", "#ff5555", false);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                    }
                } catch (TypeError) {
                    makeTooltipObject(tip.id, "", "Locked", "12px", "#ff5555", false);
                    document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                }
            }
            else if (skinPaths[i] == "completionist") {
                makeTooltipObject(tip.id, "", "Unlock all other " + classnamesCapital[selectedClass] + " skins.", "12px", "#ffaa00", true);
                makeTooltipObject(tip.id, "", "Status: ", "12px", "#c0c0c0", false);
                try {
                    if (classTotalSkins[selectedClass] == currentSkinCount[selectedClass]) {
                        makeTooltipObject(tip.id, "", "Unlocked!", "12px", "#55ff55", false);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#22aa22";
                        addCheck(skinNames, i);
                    } else {
                        makeTooltipObject(tip.id, "", "Locked", "12px", "#ff5555", false);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                    }
                } catch (TypeError) {
                    makeTooltipObject(tip.id, "", "Locked", "12px", "#ff5555", false);
                    document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                }
            }
            else {
                makeTooltipObject(tip.id, "", skinReqDesc[i], "12px", "#c0c0c0", true);
                makeTooltipObject(tip.id, "", "Status: ", "12px", "#c0c0c0", false);
                try {
                    if (mwdata[skinPaths[i]] >= skinReqs[i] && skinPaths[i] != "squid_defender_final_kills") {
                        makeTooltipObject(tip.id, "", "Unlocked! (", "12px", "#55ff55", false);
                        makeTooltipObject(tip.id, "", mwdata[skinPaths[i]], "12px", "#55ff55", false);
                        makeTooltipObject(tip.id, "", "/", "12px", "#55ff55", false);
                        makeTooltipObject(tip.id, "", skinReqs[i], "12px", "#55ff55", false);
                        makeTooltipObject(tip.id, "", ")", "12px", "#55ff55", false);
                        addCheck(skinNames, i);
                        document.getElementById(skinNames[i] + "_box").style.borderColor = "#22aa22";
                    } else if (skinPaths[i] == "squid_defender_final_kills") {
                        
                        // I had to write an entire exception for these TWO stats. Enjoy.

                        var squidDefFKA = 0;
                        if (mwdata[skinPaths[i]] != undefined) {
                            if (mwdata[extraPaths[0]] != undefined){
                                squidDefFKA = parseInt(mwdata[skinPaths[i]]) + parseInt(mwdata[extraPaths[0]]);
                            } else {
                                squidDefFKA = parseInt(mwdata[skinPaths[i]]);
                            }
                        } else {
                            if (mwdata[extraPaths[0]] != undefined){
                                squidDefFKA = parseInt(mwdata[extraPaths[0]]);
                            } else {
                                squidDefFKA = 0;
                            }
                        }

                        if (squidDefFKA >= 10) {
                            makeTooltipObject(tip.id, "", "Unlocked! (", "12px", "#55ff55", false);
                            makeTooltipObject(tip.id, "", squidDefFKA, "12px", "#55ff55", false);
                            makeTooltipObject(tip.id, "", "/", "12px", "#55ff55", false);
                            makeTooltipObject(tip.id, "", skinReqs[i], "12px", "#55ff55", false);
                            makeTooltipObject(tip.id, "", ")", "12px", "#55ff55", false);
                            document.getElementById(skinNames[i] + "_box").style.borderColor = "#22aa22";
                            addCheck(skinNames, i);
                        } else {
                            makeTooltipObject(tip.id, "", "Locked (", "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", squidDefFKA, "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", "/", "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", skinReqs[i], "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", ")", "12px", "#ff5555", false);
                            document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                        }
                        
                    } else if (skinPaths[i] == "final_assists_after_final_killed") {

                        var deadFKA = 0;
                        if (mwdata[skinPaths[i]] != undefined) {
                            if (mwdata[extraPaths[0]] != undefined){
                                deadFKA = parseInt(mwdata[skinPaths[i]]) + parseInt(mwdata[extraPaths[1]]);
                            } else {
                                deadFKA = parseInt(mwdata[skinPaths[i]]);
                            }
                        } else {
                            if (mwdata[extraPaths[0]] != undefined){
                                deadFKA = parseInt(mwdata[extraPaths[0]]);
                            } else {
                                deadFKA = 0;
                            }
                        }

                        if (deadFKA >= 15) {
                            makeTooltipObject(tip.id, "", "Unlocked! (", "12px", "#55ff55", false);
                            makeTooltipObject(tip.id, "", deadFKA, "12px", "#55ff55", false);
                            makeTooltipObject(tip.id, "", "/", "12px", "#55ff55", false);
                            makeTooltipObject(tip.id, "", skinReqs[i], "12px", "#55ff55", false);
                            makeTooltipObject(tip.id, "", ")", "12px", "#55ff55", false);
                            document.getElementById(skinNames[i] + "_box").style.borderColor = "#22aa22";
                            addCheck(skinNames, i);
                        } else {
                            makeTooltipObject(tip.id, "", "Locked (", "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", deadFKA, "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", "/", "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", skinReqs[i], "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", ")", "12px", "#ff5555", false);
                            document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                        }
                        
                    } else {
                        if (mwdata[skinPaths[i]] != undefined){
                            makeTooltipObject(tip.id, "", "Locked (", "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", mwdata[skinPaths[i]], "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", "/", "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", skinReqs[i], "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", ")", "12px", "#ff5555", false);
                            document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                        } else {
                            makeTooltipObject(tip.id, "", "Locked (0/", "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", skinReqs[i], "12px", "#ff5555", false);
                            makeTooltipObject(tip.id, "", ")", "12px", "#ff5555", false);
                            document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                        }
                    }
                } catch (TypeError) {
                    makeTooltipObject(tip.id, "", "Locked (0/", "12px", "#ff5555", false);
                    makeTooltipObject(tip.id, "", skinReqs[i], "12px", "#ff5555", false);
                    makeTooltipObject(tip.id, "", ")", "12px", "#ff5555", false);
                    document.getElementById(skinNames[i] + "_box").style.borderColor = "#ff5555";
                }
            }
            
        }

    }
    var selectedSkin = "";
    var selectedColor = "";
    function selectSkin(skinName) {
        if (skinName == -1){
            skinrow1.innerHTML = "";
            skinrow2.innerHTML = "";
            var defaultdiv = document.createElement("div");
            defaultdiv.className = "fishbox";
            var defaultdivtext = document.createElement("div");
            defaultdivtext.className = "fishboxtext";
            defaultdivtext.innerText = "Select a class first!";
            defaultdiv.appendChild(defaultdivtext);
            var defaultimg = document.createElement("img");
            defaultimg.src = "./images/mega_walls/not_unlocked.png";
            defaultimg.style.width = "80%";
            defaultimg.style.height = "80%";
            defaultdiv.appendChild(defaultimg);
            skinrow2.appendChild(defaultdiv);

            return -1;
        }
        if (selectedSkin != ""){
            try {
                document.getElementById(selectedSkin + "_box").style.borderColor = selectedColor;
            } catch (ReferenceError) {
            }
        }
        if (selectedColor != "") {
            try {
                document.getElementById(selectedSkin + "_box").style.borderColor = "selectedColor";
            } catch (ReferenceError){
            }
            
        }
        selectedSkin = skinName;
        selectedColor = document.getElementById(selectedSkin + "_box").style.borderColor;
        document.getElementById(skinName + "_box").style.borderColor = "#55ffff";
        makeRender(skinName);
        downloadlink.href = "./images/mega_walls/skins/" + skinName + ".png";
        downloadlink.download = skinName + ".png";
    }

    function addSkinBox(targetrow, imageName){
        var box = document.createElement("div");
        box.style.position = "relative";
        box.className = "fishbox";
        var bg = document.createElement("span");
        bg.id = imageName + "_span";
        bg.style.height = "8px"; 
        bg.style.width = "8px";
        bg.style.transform = "scale(5)";
        bg.style.imageRendering = "pixelated";
        bg.style.backgroundImage = "url('./images/mega_walls/skins/" + imageName + ".png')";
        bg.style.backgroundRepeat = "no-repeat";
        bg.style.backgroundPositionX = "-8px";
        bg.style.backgroundPositionY = "-8px";
        bg.style.position = "absolute";
        box.appendChild(bg);
        var fringe = document.createElement("span");
        fringe.id = imageName + "_span";
        fringe.style.height = "8px"; 
        fringe.style.width = "8px";
        fringe.style.transform = "scale(5)";
        fringe.style.imageRendering = "pixelated";
        fringe.style.backgroundImage = "url('./images/mega_walls/skins/" + imageName + ".png')";
        fringe.style.backgroundRepeat = "no-repeat";
        fringe.style.backgroundPositionX = "-40px";
        fringe.style.backgroundPositionY = "-8px";
        fringe.style.position = "absolute";
        box.appendChild(fringe);
        var tooltip = document.createElement("div");
        tooltip.className = "fishboxtext";
        tooltip.id = (imageName + "_tiptext");
        tooltip.style.opacity = "90%";
        tooltip.style.zIndex = "5";
        box.appendChild(tooltip);
        box.id = imageName + "_box";
        box.style.cursor = "pointer";
        box.onclick = function() {
            selectSkin(imageName);
        };
        targetrow.appendChild(box);
    }

    function makeRender(skinName){
        let skinViewer = new skinview3d.SkinViewer({
            canvas: document.getElementById("skin_container"),
            width: 200,
            height: 400,
            skin: "images/mega_walls/skins/" + skinName + ".png"
        });
        skinViewer.background = 0x808080;
        skinViewer.fov = 70;
        skinViewer.zoom = 0.7;

        skinViewer.animation = new skinview3d.IdleAnimation();
        skinViewer.animation.speed = 1;
        skinViewer.camera.position.x = 20;
        skinViewer.camera.position.y = 5;
       
    }

    function updateSize(){
      if (window.innerWidth >= 768 * (5/3)) {
          console.log("Desktop mode...");
          for (var i = 1; i <= 3; i++) {
            document.getElementById("row" + i).style.width = "50%";
            document.getElementById("row" + i).style.flexBasis = "51%";
          }
          document.getElementById("row4").style.flexWrap = "nowrap";
          
        } else {
          console.log("Mobile mode...");
          for (var i = 1; i <= 3; i++) {
            document.getElementById("row" + i).style.width = "min(calc(100% - 30px), max(960px, 70%))";
            document.getElementById("row" + i).style.flexBasis = "min(calc(100% - 30px), max(960px, 70%))";
          }
          document.getElementById("row4").style.flexWrap = "wrap";
        }
    }

    
  </script>